{"version":3,"file":"store.umd.js","sources":["../../src/plugins/Store.js"],"sourcesContent":["\"use strict\";\n\n/**\n * @class ðŸª StorePlugin\n * @classdesc A powerful reactive state management plugin for Eleva that enables sharing\n * reactive data across the entire application. The Store plugin provides a centralized,\n * reactive data store that can be accessed from any component's setup function.\n *\n * Core Features:\n * - Centralized reactive state management using Eleva's signal system\n * - Global state accessibility through component setup functions\n * - Namespace support for organizing store modules\n * - Built-in persistence with localStorage/sessionStorage support\n * - Action-based state mutations with validation\n * - Subscription system for reactive updates\n * - DevTools integration for debugging\n * - Plugin architecture for extensibility\n *\n * @example\n * // Install the plugin\n * const app = new Eleva(\"myApp\");\n * app.use(StorePlugin, {\n *   state: {\n *     user: { name: \"John\", email: \"john@example.com\" },\n *     counter: 0,\n *     todos: []\n *   },\n *   actions: {\n *     increment: (state) => state.counter.value++,\n *     addTodo: (state, todo) => state.todos.value.push(todo),\n *     setUser: (state, user) => state.user.value = user\n *   },\n *   persistence: {\n *     enabled: true,\n *     key: \"myApp-store\",\n *     storage: \"localStorage\"\n *   }\n * });\n *\n * // Use store in components\n * app.component(\"Counter\", {\n *   setup({ store }) {\n *     return {\n *       count: store.state.counter,\n *       increment: () => store.dispatch(\"increment\"),\n *       user: store.state.user\n *     };\n *   },\n *   template: (ctx) => `\n *     <div>\n *       <p>Hello ${ctx.user.value.name}!</p>\n *       <p>Count: ${ctx.count.value}</p>\n *       <button onclick=\"ctx.increment()\">+</button>\n *     </div>\n *   `\n * });\n */\nexport const StorePlugin = {\n  /**\n   * Unique identifier for the plugin\n   * @type {string}\n   */\n  name: \"store\",\n\n  /**\n   * Plugin version\n   * @type {string}\n   */\n  version: \"1.0.0\",\n\n  /**\n   * Plugin description\n   * @type {string}\n   */\n  description:\n    \"Reactive state management for sharing data across the entire Eleva application\",\n\n  /**\n   * Installs the plugin into the Eleva instance\n   *\n   * @param {Object} eleva - The Eleva instance\n   * @param {Object} options - Plugin configuration options\n   * @param {Object} [options.state={}] - Initial state object\n   * @param {Object} [options.actions={}] - Action functions for state mutations\n   * @param {Object} [options.namespaces={}] - Namespaced modules for organizing store\n   * @param {Object} [options.persistence] - Persistence configuration\n   * @param {boolean} [options.persistence.enabled=false] - Enable state persistence\n   * @param {string} [options.persistence.key=\"eleva-store\"] - Storage key\n   * @param {\"localStorage\" | \"sessionStorage\"} [options.persistence.storage=\"localStorage\"] - Storage type\n   * @param {Array<string>} [options.persistence.include] - State keys to persist (if not provided, all state is persisted)\n   * @param {Array<string>} [options.persistence.exclude] - State keys to exclude from persistence\n   * @param {boolean} [options.devTools=false] - Enable development tools integration\n   * @param {Function} [options.onError=null] - Error handler function\n   *\n   * @example\n   * // Basic installation\n   * app.use(StorePlugin, {\n   *   state: { count: 0, user: null },\n   *   actions: {\n   *     increment: (state) => state.count.value++,\n   *     setUser: (state, user) => state.user.value = user\n   *   }\n   * });\n   *\n   * // Advanced installation with persistence and namespaces\n   * app.use(StorePlugin, {\n   *   state: { theme: \"light\" },\n   *   namespaces: {\n   *     auth: {\n   *       state: { user: null, token: null },\n   *       actions: {\n   *         login: (state, { user, token }) => {\n   *           state.user.value = user;\n   *           state.token.value = token;\n   *         },\n   *         logout: (state) => {\n   *           state.user.value = null;\n   *           state.token.value = null;\n   *         }\n   *       }\n   *     }\n   *   },\n   *   persistence: {\n   *     enabled: true,\n   *     include: [\"theme\", \"auth.user\"]\n   *   }\n   * });\n   */\n  install(eleva, options = {}) {\n    const {\n      state = {},\n      actions = {},\n      namespaces = {},\n      persistence = {},\n      devTools = false,\n      onError = null,\n    } = options;\n\n    /**\n     * Store instance that manages all state and provides the API\n     * @private\n     */\n    class Store {\n      constructor() {\n        this.state = {};\n        this.actions = {};\n        this.subscribers = new Set();\n        this.mutations = [];\n        this.persistence = {\n          enabled: false,\n          key: \"eleva-store\",\n          storage: \"localStorage\",\n          include: null,\n          exclude: null,\n          ...persistence,\n        };\n        this.devTools = devTools;\n        this.onError = onError;\n\n        this._initializeState(state, actions);\n        this._initializeNamespaces(namespaces);\n        this._loadPersistedState();\n        this._setupDevTools();\n      }\n\n      /**\n       * Initializes the root state and actions\n       * @private\n       */\n      _initializeState(initialState, initialActions) {\n        // Create reactive signals for each state property\n        Object.entries(initialState).forEach(([key, value]) => {\n          this.state[key] = new eleva.signal(value);\n        });\n\n        // Set up actions\n        this.actions = { ...initialActions };\n      }\n\n      /**\n       * Initializes namespaced modules\n       * @private\n       */\n      _initializeNamespaces(namespaces) {\n        Object.entries(namespaces).forEach(([namespace, module]) => {\n          const { state: moduleState = {}, actions: moduleActions = {} } =\n            module;\n\n          // Create namespace object if it doesn't exist\n          if (!this.state[namespace]) {\n            this.state[namespace] = {};\n          }\n          if (!this.actions[namespace]) {\n            this.actions[namespace] = {};\n          }\n\n          // Initialize namespaced state\n          Object.entries(moduleState).forEach(([key, value]) => {\n            this.state[namespace][key] = new eleva.signal(value);\n          });\n\n          // Set up namespaced actions\n          this.actions[namespace] = { ...moduleActions };\n        });\n      }\n\n      /**\n       * Loads persisted state from storage\n       * @private\n       */\n      _loadPersistedState() {\n        if (!this.persistence.enabled || typeof window === \"undefined\") {\n          return;\n        }\n\n        try {\n          const storage = window[this.persistence.storage];\n          const persistedData = storage.getItem(this.persistence.key);\n\n          if (persistedData) {\n            const data = JSON.parse(persistedData);\n            this._applyPersistedData(data);\n          }\n        } catch (error) {\n          if (this.onError) {\n            this.onError(error, \"Failed to load persisted state\");\n          } else {\n            console.warn(\n              \"[StorePlugin] Failed to load persisted state:\",\n              error\n            );\n          }\n        }\n      }\n\n      /**\n       * Applies persisted data to the current state\n       * @private\n       */\n      _applyPersistedData(data, currentState = this.state, path = \"\") {\n        Object.entries(data).forEach(([key, value]) => {\n          const fullPath = path ? `${path}.${key}` : key;\n\n          if (this._shouldPersist(fullPath)) {\n            if (\n              currentState[key] &&\n              typeof currentState[key] === \"object\" &&\n              \"value\" in currentState[key]\n            ) {\n              // This is a signal, update its value\n              currentState[key].value = value;\n            } else if (\n              typeof value === \"object\" &&\n              value !== null &&\n              currentState[key]\n            ) {\n              // This is a nested object, recurse\n              this._applyPersistedData(value, currentState[key], fullPath);\n            }\n          }\n        });\n      }\n\n      /**\n       * Determines if a state path should be persisted\n       * @private\n       */\n      _shouldPersist(path) {\n        const { include, exclude } = this.persistence;\n\n        if (include && include.length > 0) {\n          return include.some((includePath) => path.startsWith(includePath));\n        }\n\n        if (exclude && exclude.length > 0) {\n          return !exclude.some((excludePath) => path.startsWith(excludePath));\n        }\n\n        return true;\n      }\n\n      /**\n       * Saves current state to storage\n       * @private\n       */\n      _saveState() {\n        if (!this.persistence.enabled || typeof window === \"undefined\") {\n          return;\n        }\n\n        try {\n          const storage = window[this.persistence.storage];\n          const dataToSave = this._extractPersistedData();\n          storage.setItem(this.persistence.key, JSON.stringify(dataToSave));\n        } catch (error) {\n          if (this.onError) {\n            this.onError(error, \"Failed to save state\");\n          } else {\n            console.warn(\"[StorePlugin] Failed to save state:\", error);\n          }\n        }\n      }\n\n      /**\n       * Extracts data that should be persisted\n       * @private\n       */\n      _extractPersistedData(currentState = this.state, path = \"\") {\n        const result = {};\n\n        Object.entries(currentState).forEach(([key, value]) => {\n          const fullPath = path ? `${path}.${key}` : key;\n\n          if (this._shouldPersist(fullPath)) {\n            if (value && typeof value === \"object\" && \"value\" in value) {\n              // This is a signal, extract its value\n              result[key] = value.value;\n            } else if (typeof value === \"object\" && value !== null) {\n              // This is a nested object, recurse\n              const nestedData = this._extractPersistedData(value, fullPath);\n              if (Object.keys(nestedData).length > 0) {\n                result[key] = nestedData;\n              }\n            }\n          }\n        });\n\n        return result;\n      }\n\n      /**\n       * Sets up development tools integration\n       * @private\n       */\n      _setupDevTools() {\n        if (\n          !this.devTools ||\n          typeof window === \"undefined\" ||\n          !window.__ELEVA_DEVTOOLS__\n        ) {\n          return;\n        }\n\n        window.__ELEVA_DEVTOOLS__.registerStore(this);\n      }\n\n      /**\n       * Dispatches an action to mutate the state\n       * @param {string} actionName - The name of the action to dispatch (supports namespaced actions like \"auth.login\")\n       * @param {any} payload - The payload to pass to the action\n       * @returns {Promise<any>} The result of the action\n       */\n      async dispatch(actionName, payload) {\n        try {\n          const action = this._getAction(actionName);\n\n          if (!action) {\n            const error = new Error(`Action \"${actionName}\" not found`);\n            if (this.onError) {\n              this.onError(error, actionName);\n            }\n            throw error;\n          }\n\n          const mutation = {\n            type: actionName,\n            payload,\n            timestamp: Date.now(),\n          };\n\n          // Record mutation for devtools\n          this.mutations.push(mutation);\n          if (this.mutations.length > 100) {\n            this.mutations.shift(); // Keep only last 100 mutations\n          }\n\n          // Execute the action\n          const result = await action.call(null, this.state, payload);\n\n          // Save state if persistence is enabled\n          this._saveState();\n\n          // Notify subscribers\n          this.subscribers.forEach((callback) => {\n            try {\n              callback(mutation, this.state);\n            } catch (error) {\n              if (this.onError) {\n                this.onError(error, \"Subscriber callback failed\");\n              }\n            }\n          });\n\n          // Notify devtools\n          if (\n            this.devTools &&\n            typeof window !== \"undefined\" &&\n            window.__ELEVA_DEVTOOLS__\n          ) {\n            window.__ELEVA_DEVTOOLS__.notifyMutation(mutation, this.state);\n          }\n\n          return result;\n        } catch (error) {\n          if (this.onError) {\n            this.onError(error, `Action dispatch failed: ${actionName}`);\n          }\n          throw error;\n        }\n      }\n\n      /**\n       * Gets an action by name (supports namespaced actions)\n       * @private\n       */\n      _getAction(actionName) {\n        const parts = actionName.split(\".\");\n        let current = this.actions;\n\n        for (const part of parts) {\n          if (current[part] === undefined) {\n            return null;\n          }\n          current = current[part];\n        }\n\n        return typeof current === \"function\" ? current : null;\n      }\n\n      /**\n       * Subscribes to store mutations\n       * @param {Function} callback - Callback function to call on mutations\n       * @returns {Function} Unsubscribe function\n       */\n      subscribe(callback) {\n        if (typeof callback !== \"function\") {\n          throw new Error(\"Subscribe callback must be a function\");\n        }\n\n        this.subscribers.add(callback);\n\n        // Return unsubscribe function\n        return () => {\n          this.subscribers.delete(callback);\n        };\n      }\n\n      /**\n       * Gets a deep copy of the current state values (not signals)\n       * @returns {Object} The current state values\n       */\n      getState() {\n        return this._extractPersistedData();\n      }\n\n      /**\n       * Replaces the entire state (useful for testing or state hydration)\n       * @param {Object} newState - The new state object\n       */\n      replaceState(newState) {\n        this._applyPersistedData(newState);\n        this._saveState();\n      }\n\n      /**\n       * Clears persisted state from storage\n       */\n      clearPersistedState() {\n        if (!this.persistence.enabled || typeof window === \"undefined\") {\n          return;\n        }\n\n        try {\n          const storage = window[this.persistence.storage];\n          storage.removeItem(this.persistence.key);\n        } catch (error) {\n          if (this.onError) {\n            this.onError(error, \"Failed to clear persisted state\");\n          }\n        }\n      }\n\n      /**\n       * Registers a new namespaced module at runtime\n       * @param {string} namespace - The namespace for the module\n       * @param {Object} module - The module definition\n       * @param {Object} module.state - The module's initial state\n       * @param {Object} module.actions - The module's actions\n       */\n      registerModule(namespace, module) {\n        if (this.state[namespace] || this.actions[namespace]) {\n          console.warn(`[StorePlugin] Module \"${namespace}\" already exists`);\n          return;\n        }\n\n        // Initialize the module\n        this.state[namespace] = {};\n        this.actions[namespace] = {};\n\n        const namespaces = { [namespace]: module };\n        this._initializeNamespaces(namespaces);\n\n        this._saveState();\n      }\n\n      /**\n       * Unregisters a namespaced module\n       * @param {string} namespace - The namespace to unregister\n       */\n      unregisterModule(namespace) {\n        if (!this.state[namespace] && !this.actions[namespace]) {\n          console.warn(`[StorePlugin] Module \"${namespace}\" does not exist`);\n          return;\n        }\n\n        delete this.state[namespace];\n        delete this.actions[namespace];\n        this._saveState();\n      }\n\n      /**\n       * Creates a new reactive state property at runtime\n       * @param {string} key - The state key\n       * @param {*} initialValue - The initial value\n       * @returns {Object} The created signal\n       */\n      createState(key, initialValue) {\n        if (this.state[key]) {\n          return this.state[key]; // Return existing state\n        }\n\n        this.state[key] = new eleva.signal(initialValue);\n        this._saveState();\n        return this.state[key];\n      }\n\n      /**\n       * Creates a new action at runtime\n       * @param {string} name - The action name\n       * @param {Function} actionFn - The action function\n       */\n      createAction(name, actionFn) {\n        if (typeof actionFn !== \"function\") {\n          throw new Error(\"Action must be a function\");\n        }\n\n        this.actions[name] = actionFn;\n      }\n    }\n\n    // Create the store instance\n    const store = new Store();\n\n    // Store the original mount method to override it\n    const originalMount = eleva.mount;\n\n    /**\n     * Override the mount method to inject store context into components\n     */\n    eleva.mount = async (container, compName, props = {}) => {\n      // Get the component definition\n      const componentDef =\n        typeof compName === \"string\"\n          ? eleva._components.get(compName) || compName\n          : compName;\n\n      if (!componentDef) {\n        return await originalMount.call(eleva, container, compName, props);\n      }\n\n      // Create a wrapped component that injects store into setup\n      const wrappedComponent = {\n        ...componentDef,\n        async setup(ctx) {\n          // Inject store into the context with enhanced API\n          ctx.store = {\n            // Core store functionality\n            state: store.state,\n            dispatch: store.dispatch.bind(store),\n            subscribe: store.subscribe.bind(store),\n            getState: store.getState.bind(store),\n\n            // Module management\n            registerModule: store.registerModule.bind(store),\n            unregisterModule: store.unregisterModule.bind(store),\n\n            // Utilities for dynamic state/action creation\n            createState: store.createState.bind(store),\n            createAction: store.createAction.bind(store),\n\n            // Access to signal constructor for manual state creation\n            signal: eleva.signal,\n          };\n\n          // Call original setup if it exists\n          const originalSetup = componentDef.setup;\n          const result = originalSetup ? await originalSetup(ctx) : {};\n\n          return result;\n        },\n      };\n\n      // Call original mount with wrapped component\n      return await originalMount.call(\n        eleva,\n        container,\n        wrappedComponent,\n        props\n      );\n    };\n\n    // Override _mountComponents to ensure child components also get store context\n    const originalMountComponents = eleva._mountComponents;\n    eleva._mountComponents = async (container, children, childInstances) => {\n      // Create wrapped children with store injection\n      const wrappedChildren = {};\n\n      for (const [selector, childComponent] of Object.entries(children)) {\n        const componentDef =\n          typeof childComponent === \"string\"\n            ? eleva._components.get(childComponent) || childComponent\n            : childComponent;\n\n        if (componentDef && typeof componentDef === \"object\") {\n          wrappedChildren[selector] = {\n            ...componentDef,\n            async setup(ctx) {\n              // Inject store into the context with enhanced API\n              ctx.store = {\n                // Core store functionality\n                state: store.state,\n                dispatch: store.dispatch.bind(store),\n                subscribe: store.subscribe.bind(store),\n                getState: store.getState.bind(store),\n\n                // Module management\n                registerModule: store.registerModule.bind(store),\n                unregisterModule: store.unregisterModule.bind(store),\n\n                // Utilities for dynamic state/action creation\n                createState: store.createState.bind(store),\n                createAction: store.createAction.bind(store),\n\n                // Access to signal constructor for manual state creation\n                signal: eleva.signal,\n              };\n\n              // Call original setup if it exists\n              const originalSetup = componentDef.setup;\n              const result = originalSetup ? await originalSetup(ctx) : {};\n\n              return result;\n            },\n          };\n        } else {\n          wrappedChildren[selector] = childComponent;\n        }\n      }\n\n      // Call original _mountComponents with wrapped children\n      return await originalMountComponents.call(\n        eleva,\n        container,\n        wrappedChildren,\n        childInstances\n      );\n    };\n\n    // Expose store instance and utilities on the Eleva instance\n    eleva.store = store;\n\n    /**\n     * Expose utility methods on the Eleva instance\n     * @namespace eleva.store\n     */\n    eleva.createAction = (name, actionFn) => {\n      store.actions[name] = actionFn;\n    };\n\n    eleva.dispatch = (actionName, payload) => {\n      return store.dispatch(actionName, payload);\n    };\n\n    eleva.getState = () => {\n      return store.getState();\n    };\n\n    eleva.subscribe = (callback) => {\n      return store.subscribe(callback);\n    };\n\n    // Store original methods for cleanup\n    eleva._originalMount = originalMount;\n    eleva._originalMountComponents = originalMountComponents;\n  },\n\n  /**\n   * Uninstalls the plugin from the Eleva instance\n   *\n   * @param {Object} eleva - The Eleva instance\n   *\n   * @description\n   * Restores the original Eleva methods and removes all plugin-specific\n   * functionality. This method should be called when the plugin is no\n   * longer needed.\n   *\n   * @example\n   * // Uninstall the plugin\n   * StorePlugin.uninstall(app);\n   */\n  uninstall(eleva) {\n    // Restore original mount method\n    if (eleva._originalMount) {\n      eleva.mount = eleva._originalMount;\n      delete eleva._originalMount;\n    }\n\n    // Restore original _mountComponents method\n    if (eleva._originalMountComponents) {\n      eleva._mountComponents = eleva._originalMountComponents;\n      delete eleva._originalMountComponents;\n    }\n\n    // Remove store instance and utility methods\n    if (eleva.store) {\n      delete eleva.store;\n    }\n    if (eleva.createAction) {\n      delete eleva.createAction;\n    }\n    if (eleva.dispatch) {\n      delete eleva.dispatch;\n    }\n    if (eleva.getState) {\n      delete eleva.getState;\n    }\n    if (eleva.subscribe) {\n      delete eleva.subscribe;\n    }\n  },\n};\n\n// Short name export for convenience\nexport { StorePlugin as Store };\n"],"names":["StorePlugin","name","version","description","install","eleva","options","state","actions","namespaces","persistence","devTools","onError","Store","_initializeState","initialState","initialActions","Object","entries","forEach","key","value","signal","_initializeNamespaces","namespace","module","moduleState","moduleActions","_loadPersistedState","enabled","window","storage","persistedData","getItem","data","JSON","parse","_applyPersistedData","error","console","warn","currentState","path","fullPath","_shouldPersist","include","exclude","length","some","includePath","startsWith","excludePath","_saveState","dataToSave","_extractPersistedData","setItem","stringify","result","nestedData","keys","_setupDevTools","__ELEVA_DEVTOOLS__","registerStore","dispatch","actionName","payload","action","_getAction","Error","mutation","type","timestamp","Date","now","mutations","push","shift","call","subscribers","callback","notifyMutation","parts","split","current","part","undefined","subscribe","add","delete","getState","replaceState","newState","clearPersistedState","removeItem","registerModule","unregisterModule","createState","initialValue","createAction","actionFn","Set","store","originalMount","mount","container","compName","props","componentDef","_components","get","wrappedComponent","setup","ctx","bind","originalSetup","originalMountComponents","_mountComponents","children","childInstances","wrappedChildren","selector","childComponent","_originalMount","_originalMountComponents","uninstall"],"mappings":"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"}